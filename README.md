# 🚀 Proxy Service with Auto Authorization

<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)
![Node.js](https://img.shields.io/badge/Node.js-43853D?style=for-the-badge&logo=node.js&logoColor=white)
![Express.js](https://img.shields.io/badge/Express.js-404D59?style=for-the-badge)

**Локальный прокси-сервис, который автоматически добавляет токен авторизации во все HTTP-запросы**

[Возможности](#-возможности) • [Установка](#-установка) • [Использование](#-использование) • [Как это работает](#-как-это-работает)

</div>

---

## 📖 Описание

Proxy Service — это легковесный локальный прокси-сервер на TypeScript, который позволяет просматривать любые веб-сайты через прокси с автоматической подстановкой токена авторизации в заголовки всех HTTP-запросов.

### 🎯 Для чего это нужно?

- **Тестирование API** с авторизацией без постоянного добавления токенов
- **Разработка фронтенда** с защищённым бэкендом
- **Отладка** веб-приложений с авторизацией
- **Bypass** авторизации для быстрого доступа к защищённым ресурсам
- **Демонстрация** защищённых сайтов без раскрытия токенов

---

## ✨ Возможности

- ✅ **Автоматическая инъекция токена** во все HTTP-запросы
- ✅ **Красивый веб-интерфейс** для настройки
- ✅ **Прозрачное проксирование** HTML, CSS, JS, изображений, API
- ✅ **Перезапись URL** для корректной работы ссылок
- ✅ **Обработка редиректов** через прокси
- ✅ **Сессионная система** для работы с несколькими сайтами одновременно
- ✅ **Цветной вывод в консоли** с красивым логотипом
- ✅ **TypeScript** для надёжности и типобезопасности

---

## 📸 Скриншоты

### Главная страница
![Главная страница](https://via.placeholder.com/800x500/667eea/ffffff?text=Proxy+Service+%7C+%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F+%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0)
*Минималистичный интерфейс с градиентным фоном для ввода URL и токена*

### Консольный вывод
![Консольный вывод](https://via.placeholder.com/800x300/1a1a1a/00ff00?text=%F0%9F%9A%80+PROXY+SERVICE+%D0%97%D0%90%D0%9F%D0%A3%D0%A9%D0%95%D0%9D+%F0%9F%9A%80)
*Красиво оформленный вывод в терминале при запуске сервиса*

### Работа через прокси
![Работа через прокси](https://via.placeholder.com/800x500/764ba2/ffffff?text=%D0%A1%D0%B0%D0%B9%D1%82+%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82+%D1%87%D0%B5%D1%80%D0%B5%D0%B7+%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8)
*Целевой сайт открывается через прокси с автоматической авторизацией*

---

## 🛠 Установка

### Предварительные требования

- Node.js >= 16.x
- npm или yarn

### Быстрый старт

```bash
# 1. Клонируйте репозиторий (или создайте папку проекта)
git clone <your-repo-url>
cd proxy-service

# 2. Установите зависимости
npm install

# 3. Запустите сервис
npm start
```

### Структура проекта

```
proxy-service/
├── src/
│   └── index.ts          # Основной файл приложения
├── package.json          # Зависимости проекта
├── tsconfig.json         # Конфигурация TypeScript
└── README.md            # Документация
```

---

## 🚀 Использование

### Шаг 1: Запуск сервиса

```bash
npm start
```

Вы увидите в консоли:

```
╔════════════════════════════════════════╗
║     🚀 PROXY SERVICE ЗАПУЩЕН 🚀      ║
╚════════════════════════════════════════╝

📍 Откройте в браузере: http://localhost:3000

Для остановки нажмите Ctrl+C
```

### Шаг 2: Настройка прокси

1. Откройте `http://localhost:3000` в браузере
2. Введите **целевой URL** (например, `https://api.example.com/dashboard`)
3. Введите **токен авторизации** (например, `Bearer eyJhbGciOiJIUzI1NiIs...`)
4. Нажмите **"Поехали! 🎯"**

### Шаг 3: Работа через прокси

После нажатия кнопки вы автоматически перенаправитесь на целевой сайт через прокси. Все запросы будут содержать ваш токен в заголовке `Authorization`.

### Примеры использования

#### Пример 1: Защищённый API Dashboard

```
Целевой URL: https://dashboard.myapi.com
Токен: Bearer sk_live_abc123xyz789
```

После нажатия "Поехали!" откроется: `http://localhost:3000/p/xyz123/` с полным доступом к дашборду.

#### Пример 2: Админ-панель с JWT

```
Целевой URL: https://admin.example.com/panel
Токен: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

Все запросы к админ-панели будут автоматически авторизованы.

---

## 🔧 Как это работает

### Архитектура

```
┌─────────────┐         ┌──────────────┐         ┌─────────────┐
│   Браузер   │ ──────► │ Proxy Server │ ──────► │ Целевой API │
│             │ ◄────── │  (localhost) │ ◄────── │             │
└─────────────┘         └──────────────┘         └─────────────┘
                              │
                              ▼
                    Добавляет токен в
                    заголовок Authorization
```

### Механизм работы

1. **Создание сессии**: При нажатии "Поехали!" создаётся уникальная сессия с вашими параметрами
2. **Перенаправление**: Браузер перенаправляется на URL вида `/p/{sessionId}/путь`
3. **Перехват запросов**: Все запросы перехватываются прокси-сервером
4. **Инъекция токена**: В каждый запрос добавляется заголовок `Authorization: {ваш_токен}`
5. **Проксирование**: Запрос отправляется на целевой сервер
6. **Модификация ответа**: HTML-контент модифицируется для замены всех ссылок на проксированные
7. **Возврат результата**: Ответ возвращается в браузер

### Обработка различных типов контента

- **HTML**: Автоматическая перезапись URL, добавление `<base>` тега
- **CSS/JS**: Проксирование без изменений
- **Изображения/Медиа**: Прямое проксирование бинарных данных
- **API запросы**: Добавление токена авторизации
- **Редиректы**: Обработка через прокси

---

## 📝 Конфигурация

### Изменение порта

В файле `src/index.ts` измените константу:

```typescript
const PORT = 3000; // Измените на нужный порт
```

### Время жизни сессии

По умолчанию сессии хранятся в памяти до перезапуска сервера. Для автоматической очистки добавьте TTL:

```typescript
// Добавьте таймер очистки сессий
setInterval(() => {
  // Логика очистки старых сессий
}, 3600000); // Каждый час
```

---

## 🔒 Безопасность

⚠️ **Важно**: Этот сервис предназначен для **локального использования** в целях разработки и тестирования.

- **Не используйте** в продакшене
- **Не открывайте** порт наружу
- **Не храните** чувствительные токены в коде
- **Используйте HTTPS** для целевых URL

---

## 📦 Зависимости

| Пакет | Версия | Описание |
|-------|--------|----------|
| `express` | ^4.18.2 | Веб-фреймворк |
| `axios` | ^1.6.0 | HTTP-клиент для запросов |
| `typescript` | ^5.3.3 | TypeScript компилятор |
| `ts-node` | ^10.9.2 | Запуск TypeScript напрямую |

---

## 🛣 Roadmap

- [ ] Поддержка WebSocket
- [ ] Сохранение истории сессий
- [ ] UI для просмотра перехваченных запросов
- [ ] Экспорт логов в HAR формат
- [ ] Поддержка множественных токенов
- [ ] Docker образ

---

## 🤝 Contributing

Буду рад вашим Pull Request'ам! Для больших изменений сначала откройте Issue для обсуждения.

---

## 📄 Лицензия

MIT License - используйте свободно!

---

## 👨‍💻 Автор

Создано с ❤️ для упрощения разработки и тестирования

---

<div align="center">

**[⬆ Наверх](#-proxy-service-with-auto-authorization)**

Если проект был полезен, поставьте ⭐️

</div>
